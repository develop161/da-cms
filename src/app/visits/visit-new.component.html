<script src="visit-new.component.ts"></script>
<div class="container">
  <h1>{{pageTitle}}</h1>
  <form #form="ngForm" novalidate>
    <div class="form-group">
      <label>Reason of visit</label>
      <input type="text" class="form-control" placeholder="Reason of visit" name="reasonOfVisit" [(ngModel)]="visit.reasonOfVisit" required>
    </div>
    <div class="form-group">
      <label>Consult</label>
      <input type="text" class="form-control" placeholder="Consult" name="consult" [(ngModel)]="visit.consult" required>
    </div>
    <div class="form-group">
      <label>Patient</label>
      <input type="text" list="somethingelse" class="form-control" placeholder="Patient" name="patient" [(ngModel)]="visit.patient">
      <datalist id="somethingelse" *ngIf='patients'>
        <option value="{{patient._id}}" *ngFor='let patient of patients'>{{patient.firstName}} {{patient.lastName}}</option>
      </datalist>
    </div>
    <div class="form-group">
      <label>Date of visit</label>
      <input type="date" class="form-control" placeholder="Date of birth" name="date-of-visit" [(ngModel)]="visit.dateOfVisit"  required>
    </div>
    <div class="form-group">
      <label>Prescribed medication</label>
      <input type="text" list="medicationlist" class="form-control" placeholder="Medication" name="medication" [(ngModel)]="visit.prescribedMedication">
      <datalist id="medicationlist" *ngIf='medications'>
        <option value="{{medication._id}}" *ngFor='let medication of medications'> {{medication.name}}</option>
      </datalist>
    </div>
    <button type="submit" class="btn btn-success" (click)='onSubmit()'>Submit</button>

  </form>
</div>

{{successMessage}}
{{errorMessage}}


<div class='panel-footer'>
  <a class='btn btn-default' (click)='onBack()' style='width:80px'>
    <i class='glyphicon glyphicon-chevron-left'></i> Back
  </a>
</div>

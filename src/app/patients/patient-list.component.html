<script src="patient-list.component.ts"></script>
<div class="container">
  <h2>{{pageTitle}}</h2>
  <p>The .table-striped class adds zebra-stripes to a table:</p>

  <div class='panel-body'>
    <div class='row pull-right'>
      <div class='col-md-6'>
        <button type="button" class="btn" (click)='onNewPatient()'>New Patient</button>
      </div>
    </div>
    <div class='row'>
      <div class='col-md-2'>Filter by:</div>
      <div class='col-md-4'>
        <input type='text' [(ngModel)]='listFilter'/>
      </div>
    </div>
    <div class='row'>
      <div class='col-md-6'>
        <h3>Filtered by: {{listFilter}} </h3>
      </div>
    </div>




    <div class='table-responsive'>

      <table class="table table-striped"
             *ngIf='patients && patients.length'>
        <thead>
        <tr>
          <th>
            <button class='btn btn-primary'
                    (click)='toggleImage()'>
              {{showImage ? 'Hide' : 'Show'}} Image
            </button>
          </th>
          <th>First Name</th>
          <th>Last Name</th>
          <th>address</th>
          <th>Birthdate</th>
          <th>Last visited date</th>
          <!-- <th>Star Rate</th> -->
        </tr>
        </thead>
        <tbody>
        <tr *ngFor='let patient of filteredPatients'>
          <td>
            <img *ngIf='showImage'
                 [src]='patient.imageUrl'
                 [title]='patient.patientName'
                 [style.width.px]='imageWidth'
                 [style.margin.px]='imageMargin'>
          </td>
          <td>
            <a [routerLink]="['/patients', patient._id]">
              {{ patient.firstName }}
            </a>
          </td>
          <td>
            <a [routerLink]="['/patients', patient._id]">
              {{ patient.lastName }}
            </a>
          </td>
          <!-- <td>{{ patient._id | uppercase | convertToSpaces: '-' }}</td> -->
          <td>{{ patient.address }}</td>
          <td>{{ patient.dateOfBirth | date: 'dd/MM/yyyy' }}</td>
          <td>{{ patient.updatedAt | date: 'dd/MM/yyyy' }}</td>
          <!-- <td><pm-star [rating]='patient.starRating' (ratingClicked)='onRatingClicked($event)'></pm-star></td> -->
        </tr>
        </tbody>
      </table>
    </div>

  </div>

</div>
<div *ngIf='errorMessage' class='alert alert-danger'>
  Error: {{ errorMessage }}
</div>


